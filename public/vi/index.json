[
{
	"uri": "//localhost:1313/vi/3-remediate/3.1/",
	"title": "Áp dụng Bảo vệ Nền tảng với AWS Managed Rule",
	"tags": [],
	"description": "",
	"content": "Kịch bản Nhóm bảo mật của bạn đã xếp hạng bảo vệ chống lại các cuộc tấn công phổ biến, chẳng hạn như Cross-Site Scripting (XSS), path traversal và SQL injection (SQLi) là ưu tiên cao. Nhiệm vụ của bạn là sử dụng AWS WAF để giảm rủi ro của các cuộc tấn công ứng dụng web phổ biến này vào trang web của bạn. Tổ chức của bạn muốn có một giải pháp được quản lý hoàn toàn, không yêu cầu tạo quy tắc thủ công.\nHướng dẫn Xem lại Web ACL đã được định cấu hình cho ứng dụng web của bạn. Thêm Bộ quy tắc cốt lõi và nhóm quy tắc được quản lý cơ sở dữ liệu SQL vào WebACL. Nhóm quy tắc Bộ quy tắc cốt lõi (CRS) chứa các quy tắc thường áp dụng cho các ứng dụng web. Điều này cung cấp khả năng bảo vệ chống lại việc khai thác nhiều lỗ hổng khác nhau, bao gồm các lỗ hổng rủi ro cao và thường xảy ra được mô tả trong các ấn phẩm của OWASP như OWASP Top 10. Nhóm quy tắc cơ sở dữ liệu SQL chứa các quy tắc để chặn các mẫu yêu cầu liên quan đến việc khai thác cơ sở dữ liệu SQL, như các cuộc tấn công tiêm SQL. Xem lại tài liệu AWS WAF để biết thêm chi tiết về các quy tắc có trong bộ quy tắc Core và nhóm quy tắc cơ sở dữ liệu SQL.\nSau khi triển khai bộ quy tắc Core và nhóm quy tắc Cơ sở dữ liệu SQL, hãy kiểm tra các biện pháp bảo vệ của bạn bằng cả quét thủ công và quét tự động. Sử dụng máy quét thủ công hoặc kiểm tra Bảng điều khiển WAF để quét tự động.\nQuy trình Thêm các quy tắc được quản lý vào WAF ACL Điều hướng đến WAF ACL và tab Quy tắc của nó:\nMở AWS WAF Console.\nXác minh rằng bạn đang sử dụng vùng Toàn cầu (CloudFront)\nMở WebACL có tên là waf-workshop-webacl\nChọn tab Quy tắc\nThêm bộ quy tắc Lõi và nhóm quy tắc được quản lý của cơ sở dữ liệu SQL:\nNhấp vào Thêm Quy tắc và chọn Thêm nhóm quy tắc được quản lý Mở rộng Nhóm quy tắc được quản lý của AWS\nNhấp vào công tắc cho bộ quy tắc Lõi (đổi màu thành màu xanh lam)\nNhấp vào công tắc cho cơ sở dữ liệu SQL (đổi màu thành màu xanh lam) Nhấp vào Thêm quy tắc ở cuối trang\nTrên trang Đặt mức độ ưu tiên của quy tắc, nhấp vào Lưu\nTrên tab Quy tắc, hãy xác minh rằng AWS Managed Common và SQLi Rule Sets đều có mặt\nBạn đã thêm hai bộ quy tắc được quản lý vào WebACL. Bây giờ bạn đã sẵn sàng để kiểm tra chúng.\nĐánh giá hiệu quả bảo vệ Thực hiện theo hướng dẫn để kiểm tra thủ công các biện pháp bảo vệ từ phần Đánh giá để xác thực rằng các bài kiểm tra SQL injection, Cross-site scripting (XSS) và Path traversal đang vượt qua. Xem lại bảng thông tin tiến trình và xác minh rằng các lần quét tự động cho các bài kiểm tra được liệt kê ở trên đang vượt qua. Xin chúc mừng! Bạn đã sử dụng thành công bộ quy tắc Core và bộ quy tắc cơ sở dữ liệu SQL để áp dụng các biện pháp bảo vệ cơ bản chống lại các cuộc tấn công ứng dụng web!\n"
},
{
	"uri": "//localhost:1313/vi/4-monitor/4.1/",
	"title": "Điều tra Nhật ký AWS WAF",
	"tags": [],
	"description": "",
	"content": "Kịch bản Trước đây chúng ta đã khám phá cách AWS WAF cung cấp số liệu CloudWatch để giám sát và thiết lập cảnh báo, nhưng để khắc phục sự cố cụ thể, chúng ta thường cần vượt ra ngoài các số liệu đó và kiểm tra dữ liệu thô. Nhật ký AWS WAF cung cấp thông tin chi tiết về mọi yêu cầu được xử lý bởi Web ACL của bạn. Phần này sẽ hướng dẫn bạn cách tận dụng các nhật ký này để điều tra chuyên sâu.\nHướng dẫn Sử dụng Amazon Athena để khám phá nhật ký AWS WAF. Lưu ý rằng nhật ký AWS WAF đã được định cấu hình cho bạn và bảng waf_access_logs của Amazon Athena trỏ đến các nhật ký nằm trong S3. Nhiệm vụ đầu tiên là xác định các tiêu đề HTTP phổ biến nhất trong các yêu cầu. Tiếp theo, tìm quy tắc nào đang chặn nhiều yêu cầu nhất và trên đường dẫn URI nào. Xác định các quy tắc đang chặn quyền truy cập vào API nằm tại /api/listproducts.php. Cuối cùng, hãy tìm ra đường dẫn URI nào bị chặn bởi Bộ quy tắc cốt lõi và bởi các quy tắc WAF tùy chỉnh chặn đường dẫn mà bạn đã tạo trước đó.\nKhông có bước xác minh nào trong bài tập này.\nQuy trình Điều tra Nhật ký AWS WAF bằng Truy vấn Amazon Athena Hội thảo này được cấu hình sẵn với cơ sở dữ liệu AWS Glue, nhóm làm việc Amazon Athena và truy vấn Athena. Phần này sẽ hướng dẫn bạn cách chuyển sang nhóm làm việc Amazon Athena chính xác và truy cập các truy vấn.\nMở Amazon Athena trong AWS Console: https://console.aws.amazon.com/athena\nTrong danh sách thả xuống nhóm làm việc, hãy chọn tên nhóm làm việc waf-workshop\n3. Nếu hiển thị cửa sổ bật lên cài đặt, hãy nhấp vào Xác nhận 4. Đi đến tab Truy vấn đã lưu\nNhấp vào hàng để mở Truy vấn đã lưu có tên là MostPopularHttpHeaders Chạy truy vấn Sau khi chạy truy vấn và không thành công, nếu bạn gặp lỗi” TABLE_NOT_FOUND: dòng 1:37: Bảng \u0026lsquo;awsdatacatalog.default.waf_access_logs\u0026rsquo; không tồn tại”. Đảm bảo tên cơ sở dữ liệu là glueaccesslogsdatabase-* có bảng có tên là “waf_access_logs” Truy vấn này giúp chúng tôi hiểu Tiêu đề HTTP nào đang được truyền và tần suất sử dụng từng tiêu đề. Mong đợi sẽ thấy các giá trị khác nhau trong kết quả của bạn, vì chúng phụ thuộc vào số lượng yêu cầu đã được gửi và ghi lại.\nĐiều tra các quy tắc chặn Một trong những nhiệm vụ chung của quản trị viên WAF là hiểu tác động của các quy tắc WAF đối với các phần cụ thể của trang web của bạn. Bây giờ bạn sẽ nhập truy vấn tùy chỉnh của riêng mình để xác định quy tắc WAF nào đang chặn yêu cầu và đến đường dẫn URI cụ thể nào.\nNhấp vào biểu tượng + để bắt đầu truy vấn Amazon Athena mới\nSao chép truy vấn sau và dán vào cửa sổ truy vấn mới:\nSELECT COUNT(*) AS count, terminatingruleid, httprequest.clientip, httprequest.uri FROM waf_access_logs WHERE action=\u0026#39;BLOCK\u0026#39; GROUP BY terminatingruleid, httprequest.clientip, httprequest.uri ORDER BY count DESC LIMIT 100 Sửa đổi truy vấn trên để tìm ra quy tắc nào đang chặn yêu cầu đến API nằm tại /api/listproducts.php. Trước tiên, hãy thử tự sửa đổi truy vấn SQL và nếu bạn cần trợ giúp, hãy mở rộng phần bên dưới để biết gợi ý truy vấn. Gợi ý truy vấn\nSELECT COUNT(*) AS count, terminatingruleid, httprequest.clientip, httprequest.uri FROM waf_access_logs WHERE action=\u0026#39;BLOCK\u0026#39; AND httprequest.uri = \u0026#39;/api/listproducts.php\u0026#39; GROUP BY terminatingruleid, httprequest.clientip, httprequest.uri ORDER BY count DESC LIMIT 100 Tìm tần suất và quy tắc chặn quyền truy cập Chạy truy vấn sau để xác định các yêu cầu bị chặn bởi Bộ quy tắc chung SELECT COUNT(*) AS count, action, httprequest.clientip, httprequest.uri FROM waf_access_logs WHERE terminatingruleid=\u0026#39;AWS-AWSManagedRulesCommonRuleSet\u0026#39; GROUP BY action, httprequest.clientip, httprequest.uri ORDER BY count DESC LIMIT 100 Sửa đổi truy vấn này để tìm ra những yêu cầu nào đã bị chặn bởi quy tắc chặn đường dẫn bảo vệ thư mục /includes (quy tắc tùy chỉnh mà bạn đã tạo trong giai đoạn khắc phục). Hãy thử tự sửa đổi truy vấn SQL và nếu bạn cần trợ giúp, hãy mở rộng phần bên dưới để biết gợi ý truy vấn. Gợi ý truy vấn\nSELECT COUNT(*) AS count, terminatingruleid, action, httprequest.clientip, httprequest.uri FROM waf_access_logs WHERE action=\u0026#39;BLOCK\u0026#39; AND httprequest.uri LIKE \u0026#39;/includes/%\u0026#39; GROUP BY action, httprequest.clientip, httprequest.uri, terminatingruleid ORDER BY count DESC LIMIT 100 Xin chúc mừng! Bạn đã khám phá thành công dữ liệu nhật ký AWS WAF để biết thêm chi tiết về các yêu cầu bị chặn.\n"
},
{
	"uri": "//localhost:1313/vi/1-introduction/",
	"title": "Introduction",
	"tags": [],
	"description": "",
	"content": "Giới thiệu AWS WAF AWS WAF(AWS Web Application Firewall) là dịch vụ tường lửa ứng dụng web. Dịch vụ này giúp bảo vệ các ứng dụng web hoặc API của bạn khỏi các khai thác web phổ biến có thể ảnh hưởng đến tính khả dụng, xâm phạm bảo mật hoặc tiêu tốn quá nhiều tài nguyên.\nSử dụng WAF là một cách tuyệt vời để tăng cường khả năng phòng thủ sâu cho ứng dụng web của bạn. WAF có thể giúp giảm thiểu rủi ro của các lỗ hổng như SQL Injection, Cross Site Scripting và các cuộc tấn công phổ biến khác (được liệt kê trong Top 10 OWASP). WAF cho phép bạn tạo các quy tắc tùy chỉnh của riêng mình để quyết định xem có chặn hay cho phép các yêu cầu HTTP trước khi chúng đến ứng dụng của bạn hay không.\n"
},
{
	"uri": "//localhost:1313/vi/5-optional/5.1/",
	"title": "Tạo báo động CloudWatch cho số liệu AWS WAF",
	"tags": [],
	"description": "",
	"content": "Kịch bản Tổ chức của bạn lo ngại về việc đối tác sử dụng trình thu thập dữ liệu web và khả năng của trình thu thập dữ liệu trong phạm vi các quy tắc giới hạn tốc độ. Nhiệm vụ của bạn là thiết lập hệ thống cảnh báo sẽ thông báo cho bạn nếu việc sử dụng trình thu thập dữ liệu PHP của họ vượt quá ngưỡng đã thỏa thuận.\nHướng dẫn Đầu tiên, hãy tạo chủ đề SNS không có người đăng ký nào (không cần thiết lập thông báo qua email). Tạo báo động CloudWatch theo dõi quy tắc phpcrawl-rate-limiter và được kích hoạt nếu bất kỳ yêu cầu nào bị chặn trong bất kỳ khoảng thời gian 1 phút nào.\nXác minh cấu hình của bạn bằng cách kích hoạt giới hạn tốc độ. Yêu cầu quá mức của tập lệnh sẽ kích hoạt báo động (thay đổi trạng thái báo động).\nQuy trình Tạo chủ đề SNS Lưu ý: Bạn có thể thấy thông báo lỗi tham chiếu đến quyền KMS. Bạn có thể bỏ qua thông báo này vì chúng tôi không sử dụng các tính năng mã hóa khi không hoạt động của SNS trong phòng thí nghiệm này.\nĐiều hướng đến Dịch vụ thông báo đơn giản (SNS) trong bảng điều khiển AWS\nTrong Tạo chủ đề, nhập tên waf-alerts, sau đó nhấp vào Bước tiếp theo\nTrong Chi tiết, nhập thông tin sau:\nLoại: Chuẩn Tên: waf-alerts (phải được điền sẵn) Cuộn xuống và nhấp vào Tạo chủ đề Tạo báo thức CloudWatch Điều hướng đến dịch vụ CloudWatch trong Bảng điều khiển AWS\nĐiều hướng đến Báo thức, Tất cả báo thức\nNhấp vào Tạo báo thức\nTrong \u0026ldquo;Tạo báo thức\u0026rdquo;, nhấp vào Chọn metric 5. Điều hướng đến WAFV2, Khu vực, Quy tắc, WebACL\nChọn số liệu này: Quy tắc: rate-limiter Tên số liệu: BlockedRequests Nhấp vào Chọn số liệu Trong trang tiếp theo, hãy thay đổi Thời gian thành 1 phút Trong \u0026ldquo;Điều kiện\u0026rdquo;, hãy thay đổi trường than\u0026hellip; thành 0, nhấp vào Tiếp theo Trong Thông báo, nhấp vào Thêm thông báo và sử dụng các giá trị sau: Kích hoạt trạng thái báo động: Trong báo động Chọn Chọn chủ đề hiện có Gửi thông báo đến\u0026hellip;: waf-alerts Chấp nhận các giá trị mặc định, cuộn xuống và nhấp vào Tiếp theo Trong Tên và mô tả, nhập crawler-alarm làm tên báo động và nhấp vào Tiếp theo Trên trang Xem trước và tạo, nhấp vào Tạo báo động Xác minh cấu hình báo động Quy trình này sẽ tạo ra một số lượng lớn các yêu cầu để kích hoạt quy tắc WAF giới hạn tỷ lệ, sau đó sẽ công bố số liệu lên CloudWatch. Việc tăng số liệu CloudWatch sẽ kích hoạt báo động.\nKích hoạt báo động\nĐi tới Đầu ra sự kiện và sử dụng liên kết có tên là Kích hoạt giới hạn tỷ lệ Tập lệnh sẽ mô phỏng số lượng yêu cầu quá mức đến trang web thử nghiệm của bạn, mô phỏng lưu lượng truy cập tự động Ban đầu, các yêu cầu sẽ dẫn đến phản hồi 200 OK Khi quy tắc giới hạn tỷ lệ được kích hoạt, các yêu cầu sẽ bị chặn và dẫn đến phản hồi 429 Quá nhiều yêu cầu Xác minh trong CloudWatch\nCó thể mất vài phút để Báo động CloudWatch chuyển từ trạng thái \u0026ldquo;Dữ liệu không đủ\u0026rdquo; sang trạng thái \u0026ldquo;Đang báo động\u0026rdquo;.\nĐiều hướng đến dịch vụ CloudWatch trong AWS Console\nNhấp vào Trong báo động để xem các báo động đã kích hoạt\nBạn sẽ thấy báo động vừa tạo (Lưu ý: có thể mất 1-2 phút để chuyển sang trạng thái trong báo động)\nNhấp vào phpcrawl-alarm để biết thêm chi tiết với biểu đồ\nXin chúc mừng! Báo động giám sát quy tắc AWS WAF của bạn đã được tạo thành công. Điều này đảm bảo bạn sẽ được thông báo bất cứ khi nào quy tắc được kích hoạt.\n"
},
{
	"uri": "//localhost:1313/vi/",
	"title": "Tăng cường khả năng phòng thủ cho ứng dụng web của bạn bằng AWS WAF",
	"tags": [],
	"description": "",
	"content": "Tăng cường khả năng phòng thủ cho ứng dụng web của bạn bằng AWS WAF Chào mừng! Buổi hội thảo này cung cấp cho bạn kiến ​​thức và kỹ năng để tăng cường khả năng phòng thủ cho ứng dụng web của bạn bằng AWS WAF. Bạn sẽ có được kinh nghiệm thực tế trong việc xây dựng một bộ kiểm soát hiệu quả xung quanh ứng dụng web của mình bằng cách học cách:\nGiảm thiểu các mối đe dọa phổ biến: Hiểu và triển khai các biện pháp kiểm soát để chống lại các cuộc tấn công web thường xuyên như SQL injection và cross-site scripting. Tận dụng các kỹ thuật nâng cao: Khám phá các khả năng nâng cao, bao gồm Bot Control, phản hồi HTTP tùy chỉnh và kiểm tra JSON. Giám sát lưu lượng truy cập web: Phân tích lưu lượng truy cập bằng cách học cách sử dụng nhật ký AWS WAF, xây dựng bảng thông tin gần như thời gian thực và thu thập thông tin chi tiết để tối ưu hóa hơn nữa tình trạng bảo mật của bạn. Về hội thảo Đây là hội thảo 300 cấp độ dành cho các chuyên gia CNTT đã quen thuộc với các dịch vụ cốt lõi của AWS và đang tìm cách hiểu rõ hơn về AWS WAF và các khả năng của nó.\nThời lượng dự kiến ​​của hội thảo là khoảng 2 giờ.\nCác mô-đun Hội thảo này được chia thành phần thiết lập và sau đó là bốn mô-đun:\nGiới thiệu Chuẩn bị Khắc phục Giám sát Tùy chọn Dọn dẹp "
},
{
	"uri": "//localhost:1313/vi/4-monitor/4.2/",
	"title": "Block Mystery Test",
	"tags": [],
	"description": "",
	"content": "Kịch bản Một số yêu cầu từ máy quét tự động bao gồm tiêu đề mystery-hint. Nhiệm vụ của bạn là tìm giá trị của tiêu đề đó, giải mã nó và chặn các yêu cầu trong tương lai có cùng giá trị.\nHướng dẫn Sử dụng Amazon Athena để khám phá nhật ký AWS WAF và tìm giá trị của tiêu đề mystery-hint trong các yêu cầu. Giá trị được mã hóa base64, vì vậy bạn cần giải mã văn bản để tìm giá trị. Xây dựng quy tắc WAF tùy chỉnh để chặn giá trị tiêu đề mystery-hint bằng câu lệnh thích hợp (xem xét chuyển đổi văn bản có thể cần thiết).\nXác thực quy tắc của bạn bằng cách xem lại bảng điều khiển kiểm tra tự động mà quá trình quét tự động MysteryTest đang vượt qua. Nếu bạn đã hoàn thành các tác vụ khắc phục, thì việc hoàn thành bài tập này sẽ chuyển ô cuối cùng trên tab Tiến trình của tôi của Bảng điều khiển WAF sang màu xanh lá cây!\nQuy trình Chuyển sang Nhóm làm việc Amazon Athena Bạn có thể bỏ qua phần này nếu bạn đã đăng nhập vào bảng điều khiển Amazon Athena và đã chuyển sang nhóm làm việc waf-workshop.\nChuyển sang nhóm làm việc waf-workshop Athena\nĐiều hướng đến Bảng điều khiển Amazon Athena\nTrong danh sách thả xuống nhóm làm việc, hãy chọn tên nhóm làm việc waf-workshop\nNếu hiển thị cửa sổ bật lên cài đặt, hãy nhấp vào Xác nhận\nTìm giá trị của Mystery Hint Sử dụng truy vấn Amazon Athena để phân tích cú pháp nhật ký AWS WAF và tìm giá trị của tiêu đề mystery-hint.\nMở tab Saved queries và nhấp vào truy vấn MysteryHintHeader. Chạy truy vấn để lấy giá trị được mã hóa của tiêu đề. Lưu ý giá trị được mã hóa Base64 của tiêu đề mystery-hint 3. Bạn có thể sử dụng bất kỳ phương pháp nào để giải mã giá trị; nếu bạn cần trợ giúp, các bước trong phần tiếp theo sẽ chỉ cho bạn cách sử dụng các hàm tích hợp của Amazon Athena để thực hiện giải mã. Trong bước này, hãy sử dụng https://www.base64decode.org/, nhận dạng giá trị đã giải mã\nGiải mã giá trị của Mystery Hint Để giải mã giá trị tiêu đề, truy vấn sau sử dụng các hàm Athena from_base64() và from_utf8(). Bạn có thể đọc thêm về các hàm được hỗ trợ trong Hướng dẫn sử dụng Athena.\nNhấp vào biểu tượng + để bắt đầu truy vấn Amazon Athena mới\nViết lại truy vấn đã lưu trước đó MysteryHintHeader bằng cách sao chép nó sang một truy vấn mới với tra cứu bổ sung về giá trị đã giải mã của tiêu đề mystery-hint:\nfrom_utf8(from_base64(\u0026#39;\u0026lt;giá trị đã mã hóa\u0026gt;\u0026#39;)) Nếu bạn cần trợ giúp về truy vấn, vui lòng tìm gợi ý bên dưới:\nGợi ý truy vấn\nWITH DATASET AS (SELECT header FROM waf_access_logs CROSS JOIN UNNEST(httprequest.headers) AS t(header)) SELECT DISTINCT header.name, header.value as encoded_header_value, from_utf8(from_base64(header.value)) as decoded_header_value FROM DATASET WHERE LOWER(header.name)=\u0026#39;mystery-hint\u0026#39; Chạy truy vấn để lấy giá trị tiêu đề 4. Lưu giá trị đã giải mã để sử dụng sau - bạn sẽ tận dụng giá trị đó trong phần tiếp theo để tạo quy tắc chặn\nChặn Bài kiểm tra bí ẩn Sử dụng những gì bạn đã học trong các bài tập trước, hãy xây dựng quy tắc WAF tùy chỉnh để chặn giá trị tiêu đề MysteryHint bằng câu lệnh thích hợp. Hãy nghĩ về:\nBạn nên kiểm tra phần nào của yêu cầu? Bạn nên chỉ định điều kiện Kiểu khớp nào? Bạn nên sử dụng Chuyển đổi văn bản nào? Hãy thử tự tạo quy tắc WAF tùy chỉnh nếu bạn cần trợ giúp, hãy mở rộng phần bên dưới để biết gợi ý Chặn Bài kiểm tra bí ẩn\nTrong phần “Đặt mức độ ưu tiên của quy tắc”, hãy chọn Lưu.\nXác thực khối Mystery Test của bạn Xem lại bảng điều khiển hội thảo và xác minh rằng MysteryTest và tất cả các bài kiểm tra tự động khác đều vượt qua. Tham khảo phần Đánh giá để biết hướng dẫn. Lưu ý rằng không có quét thủ công nào được xây dựng cho bài kiểm tra này.\nXin chúc mừng! Bạn đã khám phá thành công dữ liệu nhật ký AWS WAF và chặn Mystery Test.\n"
},
{
	"uri": "//localhost:1313/vi/3-remediate/3.2/",
	"title": "Đưa ABAC vào hoạt động",
	"tags": [],
	"description": "",
	"content": "Attribute-based access control (ABAC) là một chiến lược ủy quyền xác định quyền dựa trên các thuộc tính. Trong AWS, các thuộc tính này được gọi là tag. Bạn có thể gắn các tag vào IAM resource, bao gồm IAM entity (user hoặc role) và vào AWS resource. ạn có thể tạo một ABAC duy nhất hoặc một tập hợp nhỏ các policy cho các IAM principal. Các ABAC policy này có thể được thiết kế để cho phép các hoạt động khi tag của principal khớp với tag của tài nguyên. ABAC hữu ích trong các môi trường đang phát triển nhanh chóng và giúp ích cho các tình huống mà việc quản lý policy trở nên phức tạp.\nTrong phần này, bạn sẽ xem xét các policy được gắn với role của hàm Lambda của ứng dụng mẫu và quan sát hành vi sau khi thực hiện thay đổi các tag.\nSteps: Điều hướng đến bảng điều khiển dịch vụ Lambda. Chọn “Functions” từ bảng điều khiển bên trái. Nhấp vào tên hàm “LambdaRDSTest” (Hàm đã thao tác ở phần 1.1).\nNhấp vào Tab “Configuration”.\nChọn “Permissions” từ bảng điều khiển bên trái.\nTrong phần “Execution Role”, bạn sẽ thấy tên Role “LambdaRDSTestRole” được gắn với hàm Lambda.\nNhấp vào “LambdaRDSTestRole”. Thao tác này sẽ đưa bạn đến phần Details của Role trong IAM Management Console.\nTrong Tab Permissions, bạn sẽ thấy 4 chính sách được gắn với Role này.\nXem thử Trust relationships 8. Nhấp vào biểu tượng \u0026ldquo;+\u0026rdquo; bên cạnh “AllowSM” policy.\nQ: Bạn rút ra điều gì từ policy này?\nA: kiểm tra xem thẻ aws:ResourceTag/Event và aws:ResourceTag/Workshop có khớp với các giá trị tương ứng trong thẻ aws:PrincipalTag/Event và aws:PrincipalTag/Workshop hay không.\nĐiều hướng đến bảng điều khiển dịch vụ Secrets Manager.\nNhấp vào secret được tạo bởi CloudFormation template. Tên secret sẽ là “DemoWorkshopSecret“.\nDưới phần “Tags” cho secret, hãy xem xét Tag Values cho các Tag “Event” và “Workshop” và so sánh Tag Key và Tag Value cho các ”LambdaRDSTestRole“ Tag mà bạn đã xem xét ở bước #10 ở trên.\nBạn quan sát thấy gì? Bây giờ nhấp vào “Edit tags” để chỉnh sửa các tag cho “DemoWorkshopSecret” secret. Cập nhật giá trị cho tag “Workshop” thành một giá trị khác (ví dụ: AWSKMSWorkshop). Nhấp vào “Save”. Bạn sẽ thấy một thông báo màu xanh ở trên cùng “Your tags are modified.\u0026quot; Nếu bạn truy cập lại API URL trong trình duyệt web của mình, bạn sẽ thấy một thông báo “Database not connected” làm đầu ra. Q: Tại sao kết nối lại thất bại? A: fail vì khác value trong tag Workshop (phải là AWSSecretsManagerWorkshop)\nThử nghiệm bằng cách cập nhật các Tag của secret thành một kết hợp các giá trị này và quan sát đầu ra từ API URL của ứng dụng. Sửa value tag Workshop thành AmazonGuardDutyWorkshop cũng không kết nối được\nSửa value Event thành conference cũng không kết nối database\nnếu để tag Workshop và Event có value như trên thì truy vấn database được\n"
},
{
	"uri": "//localhost:1313/vi/2-preparation/",
	"title": "Preparation",
	"tags": [],
	"description": "",
	"content": "Tải xuống và thực thi tập lệnh thiết lập Chúng tôi sẽ tải xuống tệp chứa tài nguyên của hội thảo, mẫu CloudFormation được sử dụng để cung cấp chúng và tập lệnh thiết lập. Sau đó, chúng tôi sẽ chạy tập lệnh để triển khai hội thảo trong tài khoản AWS của riêng bạn.\nTạo một thư mục có tên là \u0026ldquo;waf-workshop\u0026rdquo;.\nChạy mã sau (bạn có thể sao chép và dán tất cả các lệnh lại với nhau):\n# Tải xuống tài sản của xưởng curl \u0026#39;https://static.us-east-1.prod.workshops.aws/public/9bf792a6-2354-4106-9e62-7e75544c4ccc/assets/automated-scanner.zip\u0026#39; --output automated-scanner.zip curl \u0026#39;https://static.us-east-1.prod.workshops.aws/public/9bf792a6-2354-4106-9e62-7e75544c4ccc/assets/manual-scanner.zip\u0026#39; --output manual-scanner.zip curl \u0026#39;https://static.us-east-1.prod.workshops.aws/public/9bf792a6-2354-4106-9e62-7e75544c4ccc/assets/rate-limit-trigger.zip\u0026#39; --output rate-limit-trigger.zip curl \u0026#39;https://static.us-east-1.prod.workshops.aws/public/9bf792a6-2354-4106-9e62-7e75544c4ccc/assets/sample-static-website.html\u0026#39; --output sample-static-website.html curl \u0026#39;https://static.us-east-1.prod.workshops.aws/public/9bf792a6-2354-4106-9e62-7e75544c4ccc/assets/scanning-dashboard.html\u0026#39; --output scanning-dashboard.html # Tải xuống mẫu CloudFormation và tập lệnh thiết lập curl \u0026#39;https://static.us-east-1.prod.workshops.aws/public/9bf792a6-2354-4106-9e62-7e75544c4ccc/static/waf-workshop.yaml\u0026#39; --output waf-workshop.yaml curl \u0026#39;https://static.us-east-1.prod.workshops.aws/public/9bf792a6-2354-4106-9e62-7e75544c4ccc/static/deploy-workshop-own-account.sh\u0026#39; --output deploy-workshop-own-account.sh /2 3. Chạy tập lệnh khởi động trong thiết bị đầu cuối\nsh deploy-workshop-own-account.sh Nếu bạn gặp lỗi “syntax error: \u0026ldquo;(\u0026rdquo; không mong đợi”, trong khi chạy tập lệnh /3a Vui lòng chỉnh sửa dòng đầu tiên của tập lệnh từ “#!/bin/bash” thành “#!/bin/bash” và lưu lại. /3b và chạy tập lệnh bằng lệnh sau ./deploy-workshop-own-account.sh /3c\nNếu bạn nhận được thông báo “Không tạo/cập nhật ngăn xếp được.” thì hãy sử dụng lệnh aws cloudformation describe-stack-events --stack-name waf-workshop hoặc kiểm tra trang Stack trong bảng điều khiển CloudFormation để khắc phục sự cố: /3d1 /3d2 bạn sẽ thấy rằng bạn phải điều chỉnh MemorySize trong tệp yaml xuống 3008. /3d3 Sau khi chỉnh sửa ngăn xếp yaml, hãy chạy lại tập lệnh. Bạn sẽ đợi trong 15 phút sau đó tác vụ được triển khai thành công. /3e\nVui lòng nhớ xóa tất cả các tài nguyên đã triển khai (ngăn xếp CloudFormation) sau khi hoàn tất hội thảo để tránh các khoản phí không cần thiết.\nĐánh giá Hội thảo này sẽ hướng dẫn bạn cách đánh giá và cải thiện tình trạng bảo mật của ứng dụng web. Môi trường bạn sẽ làm việc bao gồm một ứng dụng web được lưu trữ trên AWS, được thiết kế có chủ đích để dễ bị tấn công. Mục tiêu của bạn là xác định các lỗ hổng này và triển khai các biện pháp bảo mật để giảm thiểu chúng.\nSau đây là tổng quan về các bước trong phần này:\nHiểu kiến ​​trúc: Hiểu kiến ​​trúc đã triển khai và xác định các thành phần cơ sở hạ tầng cơ bản.\nTruy cập bảng điều khiển tiến trình hội thảo: Khám phá các phát hiện từ các lần quét tự động của ứng dụng web và tiến trình chung của bạn.\nChạy quét thủ công: Thực hiện quét bảo mật thủ công trên ứng dụng web và xác định các thách thức còn lại.\nKiến trúc hội thảo Kiến trúc của hội thảo này được hiển thị như bên dưới: Đi đến tab Đầu ra của trang Ngăn xếp của trang CloudFormation.\nBước đầu tiên là tìm URL trang web trong đầu ra có tên 1xWebApplicationURL. Trang web mẫu này đã được triển khai trong tài khoản AWS của bạn cho hội thảo. Hãy thử mở nó trong một tab mới. Mục tiêu của bạn là bảo mật trang web này bằng AWS WAF.\nBạn có thể truy cập bảng điều khiển AWS WAF bằng cách sử dụng liên kết được lưu trữ trong giá trị đầu ra 2xWAFConsole. Bạn sẽ sử dụng bảng điều khiển này trong suốt hội thảo để áp dụng các biện pháp bảo vệ cho ứng dụng web mà bạn vừa xem.\nMở liên kết trong 3xProgressDashboard trong một tab khác. Bảng điều khiển này theo dõi tiến trình của bạn trong suốt hội thảo và tự động cập nhật khi bạn hoàn thành các nhiệm vụ.\nBạn cũng có thể kiểm tra thủ công các biện pháp bảo vệ WAF của mình bằng liên kết được cung cấp trong đầu ra 4xTestProtections. Điều này sẽ hữu ích sau này trong hội thảo.\n5xTriggerRateLimiting sẽ cho phép bạn kiểm tra tính năng giới hạn tốc độ của AWS WAF sau này trong hội thảo.\nMôi trường và công cụ quét trang web Buổi hội thảo này cung cấp hai phương pháp để kiểm tra các quy tắc AWS WAF mà bạn sẽ triển khai: quét tự động và quét thủ công. Các trình quét này mô phỏng các vectơ tấn công web phổ biến để giúp bạn xác định và giảm thiểu các rủi ro bảo mật tiềm ẩn, chẳng hạn như:\nSQL Injection (SQLi): Khai thác lỗ hổng để đưa mã độc vào truy vấn cơ sở dữ liệu. Cross-site Scripting (XSS): Đưa mã độc vào yêu cầu. Path Traversal: Truy cập các tệp hoặc thư mục trái phép trên máy chủ web. Sensitive Path Access: Cố gắng truy cập các tệp hoặc thư mục nhạy cảm cần bị hạn chế. Bot Activity: Xác định lưu lượng truy cập tự động và chặn bot độc hại. API Misuse: Kiểm tra việc sử dụng API không đúng cách. Các bài kiểm tra này được thiết kế để cung cấp các tình huống chung để đánh giá tiến độ hội thảo của bạn. Hãy nhớ rằng đối với các triển khai sản xuất, điều quan trọng là phải tiến hành phân tích và thử nghiệm bảo mật kỹ lưỡng ngoài phạm vi của hội thảo này.\nXin chúc mừng! Bây giờ bạn đã tìm hiểu về kiến ​​trúc được sử dụng trong hội thảo này, cách tìm đầu ra ngăn xếp có liên quan và những điều cơ bản về các lần quét được thực hiện trên trang web của bạn. Tiếp tục đến phần tiếp theo để tìm hiểu thêm về quá trình quét tự động của chúng tôi và cách kích hoạt các lần quét bổ sung theo yêu cầu.\nQuét tự động Bảng điều khiển tiến trình cung cấp biểu diễn trực quan về trạng thái bảo mật của môi trường của bạn. Nó hiển thị số lượng các bài kiểm tra tự động (ví dụ: SQL injection, XSS) hiện đang vượt qua cấu hình WAF của bạn. Liên kết để truy cập bảng điều khiển này có thể được tìm thấy trong tab Đầu ra của ngăn xếp CloudFormation.\nLưu ý rằng đôi khi có thể có một chút chậm trễ trong quá trình cập nhật dữ liệu. Nếu bạn tin rằng mình đã hoàn thành một tác vụ nhưng không thấy tác vụ đó trên bảng điều khiển, vui lòng đợi một hoặc hai phút rồi kiểm tra lại.\nTiếp tục đến phần tiếp theo để tìm hiểu cách kích hoạt quét thủ công các biện pháp bảo vệ ứng dụng web.\nQuét thủ công Phần này hướng dẫn bạn quét thủ công điểm cuối ứng dụng web để đánh giá hiệu quả của các quy tắc WAF.\nChạy Trình quét thủ công Truy cập trang Ngăn xếp và mở liên kết bên dưới đầu ra 4xTestProtections trong một tab mới. Thao tác này sẽ thực hiện quét đối với điểm cuối ứng dụng web của bạn. Tập lệnh quét chạy thử nghiệm và báo cáo lại thông tin sau, chẳng hạn như:\nYêu cầu: Lệnh yêu cầu HTTP được sử dụng (ví dụ GET hoặc POST) Kết quả: Mã trạng thái HTTP được trả về (ví dụ 200 OK hoặc 403 Forbidden)\nKết quả được mã hóa màu để giúp bạn nhanh chóng đánh giá hiệu suất của các quy tắc WAF so với hành vi dự định của chúng. Lý tưởng nhất là tất cả các thử nghiệm sẽ trả về mã trạng thái màu xanh lá cây.\nYêu cầu cơ sở đại diện cho lưu lượng hợp lệ không nên bị các quy tắc WAF của bạn chặn. Chúng sẽ luôn trả về mã trạng thái 200 OK để đảm bảo bạn không vô tình chặn người dùng hợp lệ truy cập vào ứng dụng của mình.\nXem lại kết quả quét Sau khi chạy tập lệnh quét, hãy phân tích kết quả để trả lời những câu hỏi sau:\nCó bất kỳ thử nghiệm cơ sở nào bị chặn không? Điều này cho biết các quy tắc WAF của bạn có thể quá hạn chế và cần điều chỉnh.\nCác yêu cầu độc hại được mô phỏng có bị chặn thành công không? Điều này cho thấy các quy tắc WAF của bạn đang bảo vệ ứng dụng của bạn một cách hiệu quả.\nTự mô phỏng các yêu cầu Tập lệnh quét tận dụng chức năng AWS Lambda để gửi các yêu cầu thử nghiệm. Bạn có thể sao chép quy trình này bằng cách gửi các yêu cầu tương tự từ thiết bị của riêng bạn bằng các công cụ như curl trên dòng lệnh.\nĐối với các bài kiểm tra rất cơ bản, bạn thậm chí có thể gửi các yêu cầu GET đơn giản trực tiếp từ trình duyệt của mình, có khả năng có các tham số chuỗi truy vấn và so sánh các phản hồi bạn nhận được.\nKết quả quét có thể sẽ tiết lộ các lỗ hổng bảo mật cần được giải quyết. Bước tiếp theo, khắc phục, bao gồm việc định cấu hình AWS WAF Web ACL để chặn các yêu cầu độc hại này. Khi AWS WAF chặn thành công một yêu cầu dựa trên các quy tắc của bạn, nó sẽ trả về mã trạng thái 403 Forbidden hoặc mã lỗi tùy chỉnh mà bạn đã xác định.\nXin chúc mừng! Bây giờ bạn đã quen với việc xem lại tiến trình của mình và kiểm tra các biện pháp bảo vệ được áp dụng, bạn đã chuẩn bị tốt để chuyển sang phần Remediate. Ở đó, bạn sẽ khám phá các chiến lược để triển khai các biện pháp bảo vệ trang web cần thiết với AWS WAF.\n"
},
{
	"uri": "//localhost:1313/vi/5-optional/5.2/",
	"title": "Review the WAF Bot Dashboard",
	"tags": [],
	"description": "",
	"content": "Kịch bản Nếu bạn đã bật quy tắc phát hiện Bot AWS WAF trong bài tập trước đó, bảng điều khiển Bot Control của bạn sẽ chứa dữ liệu thú vị để phân tích. Xem lại bảng điều khiển để phân tích hoạt động của bot trên trang web của bạn.\nHướng dẫn Trong WebACL của bạn, hãy điều hướng đến tab Bot Control và xem lại dữ liệu trong 1 giờ qua. Sử dụng bảng điều khiển để có cái nhìn sâu sắc nhanh về lưu lượng truy cập của bot trên trang web của bạn:\nTỷ lệ phần trăm lưu lượng truy cập là bot là bao nhiêu? Có bao nhiêu bot được phép truy cập trong 5 phút qua? Có bao nhiêu bot bị chặn? Loại bot hàng đầu là gì? Bot Zyborg đã cố gắng truy cập trang web của bạn bao nhiêu lần trong 5 phút qua? Không có bước xác thực hoặc xác minh nào trong bài tập này.\nQuy trình Điều hướng đến bảng điều khiển Bot Control Điều hướng đến WebACL trong bảng điều khiển AWS WAF\nChọn tab Bot Control\nBạn sẽ thấy các biểu đồ tương tự như ảnh chụp màn hình Thu thập số liệu Kiểm tra dữ liệu trong Tất cả các yêu cầu, theo phần trăm\nẢnh chụp màn hình bên dưới hiển thị phần có hình chữ nhật màu đỏ\nNhấp vào 1h ở góc trên bên phải của bảng điều khiển\nBiểu đồ sẽ hiển thị dữ liệu theo khoảng thời gian 5 phút\nXem lại số lượng yêu cầu được phép so với số lượng yêu cầu bị chặn trong vòng 5 phút qua interval\nBiểu đồ tiếp theo hiển thị các danh mục bot hàng đầu Thu thập dữ liệu trên một bot cụ thể Trong danh sách thả xuống Duyệt hoạt động của bot, chọn Zyborg. Biểu đồ bên dưới sẽ hiển thị dữ liệu cho bot Zyborg (tương tự như ảnh chụp màn hình này): Xin chúc mừng! Bạn đã học thành công cách phân tích nhanh lưu lượng bot trong bảng điều khiển Kiểm soát bot.\n"
},
{
	"uri": "//localhost:1313/vi/5-optional/5.3/",
	"title": "Bảo vệ biểu mẫu web bằng CAPTCHA",
	"tags": [],
	"description": "",
	"content": "Kịch bản Trang web mẫu được triển khai như một phần của hội thảo này có chứa Bài kiểm tra. Vui lòng thêm bảo vệ CAPTCHA AWS WAF vào trang Bài kiểm tra để đảm bảo rằng câu trả lời đến từ người dùng hợp lệ.\nHướng dẫn Sử dụng AWS WAF CAPTCHA để đảm bảo rằng chỉ có con người mới có thể truy cập biểu mẫu được lưu trữ tại /quiz. Xác thực thủ công rằng quy tắc đang hoạt động. Giải câu đố CAPTCHA được trình bày và giải Bài kiểm tra AWS WAF.\nQuy trình Thêm quy tắc tùy chỉnh vào Web ACL: Điều hướng đến tab Quy tắc của Web ACL\nNhấp vào Thêm quy tắc và chọn Thêm quy tắc và nhóm quy tắc của riêng tôi\nChi tiết quy tắc\nLoại quy tắc: Trình tạo quy tắc Tên: quiz-captcha Loại: Quy tắc thông thường Câu lệnh\nNếu yêu cầu: Khớp với câu lệnh Kiểm tra: Đường dẫn URI Loại khớp: Khớp chính xác với chuỗi Chuỗi cần khớp: /quiz Chuyển đổi văn bản: Không có Sau đó\nHành động: CAPTCHA Kiểm tra Đặt thời gian miễn trừ tùy chỉnh cho quy tắc này Thời gian miễn trừ: 900 giây Nhấp vào Thêm quy tắc ở cuối trang Mức độ ưu tiên của quy tắc\nTrên trang Đặt mức độ ưu tiên của quy tắc, nhấp vào Lưu Trên tab Quy tắc, hãy xác minh rằng quy tắc tùy chỉnh mới hiện đã được liệt kê (có thể nằm trên trang thứ 2 của các quy tắc) Bạn đã hoàn tất việc thêm quy tắc tùy chỉnh bằng CAPTCHA chỉ cho phép con người truy cập. Bây giờ bạn đã sẵn sàng để kiểm tra khả năng bảo vệ. Đánh giá hiệu quả bảo vệ Điều hướng đến ứng dụng web mẫu.\nMở Bài kiểm tra AWS WAF bằng liên kết ở góc trên bên phải.\nSau đó, bạn sẽ thấy một trang yêu cầu bạn xác nhận rằng bạn là người. Giải câu đố được hiển thị cho bạn. Bạn sẽ thấy thông báo Thành công trong giây lát và được chuyển hướng đến trang Bài kiểm tra.\nGiải Bài kiểm tra và nhấp vào nút Gửi. Bạn sẽ thấy thông báo bật lên với kết quả Bài kiểm tra.\nXin chúc mừng! Bạn đã triển khai thành công bảo vệ AWS WAF CAPTCHA cho biểu mẫu web.\n"
},
{
	"uri": "//localhost:1313/vi/4-monitor/4.3/",
	"title": "Insert Custom HTTP Request Header",
	"tags": [],
	"description": "",
	"content": "Kịch bản Bạn có thể sử dụng tính năng Chèn tiêu đề yêu cầu để giúp xác thực rằng các yêu cầu được gửi đến ứng dụng của bạn đã được AWS WAF đánh giá. Bạn có thể định cấu hình ứng dụng của mình để chỉ cho phép các yêu cầu có chứa tiêu đề tùy chỉnh đã chỉ định. Bạn cũng có thể chèn tiêu đề để ứng dụng của mình có thể xử lý yêu cầu khác nhau dựa trên sự hiện diện của tiêu đề hoặc chỉ cần ghi lại tiêu đề trong nhật ký ứng dụng của bạn để báo cáo và phân tích.\nKhông có bước xác minh nào trong bài tập này.\nHướng dẫn Sử dụng tính năng [chèn tiêu đề] yêu cầu (https://docs.aws.amazon.com/waf/latest/developerguide/customizing-the-incoming-request.html) của AWS WAF. Xác minh sự hiện diện của các tiêu đề đã chèn bằng Nhật ký Amazon CloudWatch.\nQuy trình Chèn Tiêu đề Tùy chỉnh: Điều hướng đến tab Quy tắc của Web ACL\nNhấp vào Thêm Quy tắc và chọn Thêm quy tắc và nhóm quy tắc của riêng tôi\nChi tiết quy tắc\nLoại quy tắc: Trình tạo quy tắc Quy tắc: header-insert, quy tắc thông thường Câu lệnh\nNếu yêu cầu: Phù hợp với câu lệnh Kiểm tra: Đường dẫn URI Loại khớp: Bắt đầu bằng chuỗi Chuỗi để khớp: /api Sau đó\nHành động: Cho phép Yêu cầu tùy chỉnh - tùy chọn: Khóa/Giá trị: request-source, TestBotCanary Nhấp vào Thêm quy tắc ở cuối trang Mức độ ưu tiên của quy tắc\nTrên trang Đặt mức độ ưu tiên của quy tắc, nhấp vào Lưu Trên tab Quy tắc, hãy xác minh rằng quy tắc tùy chỉnh mới hiện đã được liệt kê Bạn đã hoàn tất việc thêm quy tắc tùy chỉnh, hãy chèn tiêu đề tùy chỉnh. Xin chúc mừng! Bạn đã định cấu hình thành công việc chèn tiêu đề tùy chỉnh.\n"
},
{
	"uri": "//localhost:1313/vi/3-remediate/",
	"title": "Khắc phục",
	"tags": [],
	"description": "",
	"content": "Tổ chức của bạn muốn sử dụng AWS WAF như một phần của phương pháp tiếp cận theo lớp để bảo vệ ứng dụng web chính của mình. Vui lòng làm theo các hoạt động để áp dụng các loại bảo vệ khác nhau bằng AWS WAF.\nTrong mô-đun này, bạn sẽ triển khai các tác vụ sau:\nÁp dụng Bảo vệ nền tảng với Quy tắc được quản lý của AWS Bảo vệ Đường dẫn bằng Quy tắc tùy chỉnh Có được khả năng hiển thị vào Lưu lượng truy cập của Bot Chặn Bot xấu bằng Quy tắc tùy chỉnh Giới hạn lưu lượng truy cập của Bot và Gửi phản hồi tùy chỉnh Bảo vệ API bằng Phân tích nội dung yêu cầu "
},
{
	"uri": "//localhost:1313/vi/3-remediate/3.3/",
	"title": "Tăng khả năng hiển thị lưu lượng truy cập của Bot",
	"tags": [],
	"description": "",
	"content": "Kịch bản Nhóm bảo mật của tổ chức bạn nghi ngờ rằng một phần lớn lưu lượng truy cập vào trang web của bạn đến từ nhiều loại bot khác nhau, bao gồm cả bot mong muốn (như công cụ tìm kiếm) và bot không mong muốn (như trình thu thập nội dung). Bạn cần có dữ liệu tốt hơn về số lượng và loại bot trên trang web của mình. Bạn KHÔNG NÊN chặn bất kỳ lưu lượng truy cập nào của bot ngay bây giờ, ít nhất là cho đến khi bạn có cơ hội phân tích tất cả các nguồn lưu lượng truy cập. Tổ chức của bạn cũng muốn giới hạn phạm vi sử dụng kiểm soát bot để kiểm soát chi phí và tránh áp dụng các biện pháp bảo vệ không cần thiết cho các đối tượng tĩnh (bảng định kiểu CSS, tệp JS, v.v.). Các nhà phát triển web đã cung cấp câu lệnh RegEx sau đây khớp với tất cả nội dung tĩnh trên trang web:\n(?i)\\.(jpe?g|gif|png|svg|ico|css|js|woff2?)$\nHướng dẫn Bạn có thể sử dụng bộ quy tắc được quản lý của AWS WAF Bot Control để có thể xem được lưu lượng truy cập của bot trên trang web của mình. Nhóm quy tắc được quản lý của Bot Control cung cấp các tùy chọn cho các bot phổ biến và bot mục tiêu. Tùy chọn bot phổ biến sẽ thêm nhãn vào các bot tự nhận dạng, xác minh các bot mong muốn nói chung và phát hiện các chữ ký bot có độ tin cậy cao, bot mục tiêu tập trung vào các bot lan rộng. Để biết thêm chi tiết, vui lòng xem tài liệu.\nTạo một bộ mẫu regex khớp với nội dung tĩnh. Thiết lập nhóm quy tắc AWS WAF Bot Control, sử dụng scope-down để loại trừ nội dung tĩnh (sử dụng mẫu regex) và đảm bảo rằng nó chỉ đếm lưu lượng truy cập (ghi đè hành vi mặc định). Lưu ý rằng nhóm quy tắc AWS WAF Bot Control vẫn sẽ áp dụng nhãn AWS WAF cho các yêu cầu bot. Bạn sẽ có thể sử dụng các nhãn đó để kiểm soát các yêu cầu ở cấp độ chi tiết.\nSau vài phút, bạn có thể điều hướng đến tab Bot Control để xem thêm thông tin chi tiết về lưu lượng truy cập bot trên trang web của mình.\nNhiệm vụ này không có bất kỳ bước xác thực bảo vệ nào. Bạn sẽ sử dụng các nhãn do nhóm quy tắc AWS WAF Bot Control áp dụng trong hai nhiệm vụ tiếp theo.\nQuy trình Bộ mẫu Regex Đầu tiên, hãy tạo một bộ mẫu regex để lọc nội dung tĩnh dựa trên đầu vào của nhà phát triển.\nĐiều hướng đến các bộ mẫu Regex và xác minh lựa chọn vùng bảng điều khiển WAF là chính xác 2. có một mẫu regex đã được thiết lập cho bạn”. Nhấp vào đó để biết thêm chi tiết\nBiểu thức chính quy: (?i).(jpe?g|gif|png|svg|ico|css|js|woff2?)$\nBộ quy tắc AWS WAF Bot Control Tiếp theo, hãy bật AWS WAF Bot Control để có thể xem lưu lượng truy cập của bot. Ghi đè các hành động quy tắc để đếm để đảm bảo bạn không chặn bất kỳ lưu lượng truy cập nào của bot. Thao tác này sẽ đếm số lượng kết quả khớp mà không chặn bất kỳ lưu lượng truy cập nào. Sử dụng các câu lệnh scopedown để tránh quét các đối tượng tĩnh khớp với mẫu regex.\nBắt đầu thêm AWS WAF Bot Control Mở waf-workshop-webacl trong bảng điều khiển AWS WAF và chọn tab Tổng quan về lưu lượng truy cập Trong phần Bộ lọc dữ liệu, chọn tab Bot Control\nTrong phần Cách thức hoạt động, nhấp vào nhóm quy tắc Thêm AWS WAF Bot Control\nCấu hình Bot Control Đối với cấp độ kiểm tra Bot Control, hãy chọn Common làm cấp độ kiểm tra Trong Bot Control Rules, hãy đặt Override all rule actions thành Count Câu lệnh Scope-down Chọn Chỉ kiểm tra các yêu cầu khớp với phạm vi-down statement\nCâu lệnh Scope-down: enabled (checked)\nIf a request: doesn\u0026rsquo;t match the statement (NOT)\nInspect: URI path\nMatch type: Matches pattern from regex patttern set\nRegex pattern set: static-content (the regex pattern set created above)\nText transformation: None\nĐặt mức độ ưu tiên và xem lại các quy tắc Trên trang Đặt mức độ ưu tiên của quy tắc, hãy nhấp vào Lưu (không cần thay đổi) Xác minh rằng bộ quy tắc Bot Control hiện được liệt kê trên tab Rules trong Web ACL Trong vòng vài phút, bạn sẽ có thêm số liệu về Bot Control tab Tiến hành nhiệm vụ tiếp theo để tận dụng khả năng hiển thị bổ sung do AWS WAF Bot Control cung cấp Xin chúc mừng! Bạn đã tích hợp thành công AWS WAF Bot Control, tính năng này sẽ bắt đầu áp dụng nhãn cho các yêu cầu bot. Bạn sẽ sử dụng các nhãn đó trong các nhiệm vụ sau.\n"
},
{
	"uri": "//localhost:1313/vi/3-remediate/3.4/",
	"title": "Chặn Bot xấu bằng AWS Rule tùy chỉnh",
	"tags": [],
	"description": "",
	"content": "Kịch bản Trong hoạt động trước, bạn đã bật AWS WAF Bot Control để thu thập dữ liệu về hoạt động của bot. Sau khi phân tích hoạt động của bot, bạn đã xác định rằng bot \u0026ldquo;zyborg\u0026rdquo; đang gây quá tải cho máy chủ web và không được phép có bot trong ứng dụng của bạn. Bạn cần chặn tất cả các yêu cầu từ bot zyborg.\nHướng dẫn Nhóm quy tắc AWS WAF Bot Control thêm nhãn này vào các yêu cầu từ bot zyborg: awswaf:managed:aws:bot-control:bot:name:zyborg. Tạo quy tắc WAF với một câu lệnh chặn tất cả các yêu cầu có nhãn này.\nSau khi triển khai quy tắc WAF mới để chặn các yêu cầu của bot zyborg, hãy kiểm tra quy tắc mới của bạn bằng cả quét thủ công và tự động.\nThủ tục Thêm quy tắc tùy chỉnh vào Web ACL Điều hướng đến Web ACL và danh sách các quy tắc của nó. Nhấp vào \u0026ldquo;Thêm quy tắc\u0026rdquo;, chọn \u0026ldquo;Thêm quy tắc và nhóm quy tắc của riêng tôi\u0026rdquo;.\nChi tiết quy tắc Loại quy tắc: Trình tạo quy tắc Tên: zyborg-block Loại: Quy tắc thông thường Nếu yêu cầu: phù hợp với câu lệnh Câu lệnh Kiểm tra: Có nhãn Phạm vi khớp: Nhãn Khóa khớp: awswaf:managed:aws:bot-control:bot:name:zyborg Sau đó Hành động: Chặn\nNhấp vào Thêm quy tắc ở cuối trang\nMức độ ưu tiên của quy tắc Trên trang Đặt mức độ ưu tiên của quy tắc, hãy đảm bảo rằng quy tắc zyborg-block mới xuất hiện DƯỚI quy tắc do AWS WAF Bot quản lý (\u0026ldquo;AWS-AWSManagedRulesBotControlRuleSet\u0026rdquo;) và Lưu Trên tab Quy tắc, hãy xác minh rằng quy tắc tùy chỉnh mới hiện đã được liệt kê 3. Bạn đã hoàn tất việc thêm quy tắc tùy chỉnh để chặn bot zyborg. Bây giờ bạn đã sẵn sàng để kiểm tra khả năng bảo vệ.\nĐánh giá hiệu quả bảo vệ Sử dụng chức năng quét thủ công từ phần Đánh giá. Xác thực rằng thử nghiệm Bot xấu đang vượt qua và trả về lỗi 403 Cấm đối với yêu cầu đó. Xem lại bảng điều khiển hội thảo và xác minh rằng quét tự động Bad Bot đang vượt qua (màu xanh lá cây). Tham khảo phần Đánh giá để biết hướng dẫn. Xin chúc mừng! Bạn đã bảo vệ thành công trang web của mình khỏi bot zyborg.\n"
},
{
	"uri": "//localhost:1313/vi/4-monitor/",
	"title": "Monitor",
	"tags": [],
	"description": "",
	"content": "Trong phần này, bạn sẽ học cách giám sát AWS WAF bằng CloudWatch và cách điều tra nhật ký của nó. AWS WAF ghi lại số liệu CloudWatch cho từng WebACL và từng quy tắc WAF trong WebACL. Ngoài ra, AWS WAF trong hội thảo này được cấu hình sẵn để ghi nhật ký theo thời gian thực thông qua Amazon Kinesis Firehose tới Amazon S3. Bạn sẽ có cơ hội điều tra các nhật ký đó bằng cách truy vấn chúng thông qua Amazon Athena.\nBạn có thể kiểm tra cấu hình trong thẻ “Ghi nhật ký và số liệu” trong trang Web ACL Bạn cũng có thể kiểm tra lược đồ dữ liệu trong Glue\nLược đồ bảng\nCấu trúc cấu trúc yêu cầu HTTP:\n{ \u0026#34;httprequest\u0026#34;: { \u0026#34;clientip\u0026#34;: \u0026#34;string\u0026#34;, \u0026#34;country\u0026#34;: \u0026#34;string\u0026#34;, \u0026#34;headers\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;string\u0026#34;, \u0026#34;value\u0026#34;: \u0026#34;string\u0026#34; } ], \u0026#34;uri\u0026#34;: \u0026#34;string\u0026#34;, \u0026#34;args\u0026#34;: \u0026#34;string\u0026#34;, \u0026#34;httpversion\u0026#34;: \u0026#34;string\u0026#34;, \u0026#34;httpmethod\u0026#34;: \u0026#34;string\u0026#34;, \u0026#34;requestid\u0026#34;: \u0026#34;string\u0026#34; } } Nội dung Điều tra Nhật ký AWS WAF Kiểm tra bí ẩn khối Chèn Tiêu đề yêu cầu HTTP tùy chỉnh "
},
{
	"uri": "//localhost:1313/vi/5-optional/",
	"title": "Tùy chọn",
	"tags": [],
	"description": "",
	"content": "Các bài tập trong phần này là tùy chọn và có sẵn nếu bạn có đủ thời gian để hoàn thành các bài tập cốt lõi.\nNội dung Tạo báo động CloudWatch cho số liệu AWS WAF Xem lại bảng điều khiển bot WAF Bảo vệ biểu mẫu web bằng CAPTCHA "
},
{
	"uri": "//localhost:1313/vi/3-remediate/3.5/",
	"title": "Tỷ lệ giới hạn lưu lượng truy cập của bot và gửi phản hồi tùy chỉnh",
	"tags": [],
	"description": "",
	"content": "Kịch bản Sau khi phân tích sâu hơn, nhóm quản lý trang web đã xác định một trong những đối tác của bạn sử dụng bot thu thập thông tin PHP và đôi khi tạo ra các đợt tăng đột biến lưu lượng truy cập, làm chậm trang web đối với những người dùng khác. Đối tác đã được thông báo để làm việc để giảm các đợt tăng đột biến đó. Trong khi bạn chờ họ khắc phục, bạn cần giới hạn tỷ lệ lưu lượng truy cập tự động của họ để tránh bất kỳ tác động nào nữa đến hiệu suất của trang web. Giới hạn tỷ lệ phải là 100 yêu cầu trong 5 phút. Sau khi đạt đến giới hạn, phản hồi phải tuân theo RFC 6585 bằng cách trả về mã lỗi http 429 (quá nhiều yêu cầu) với tiêu đề Thử lại sau cho biết người yêu cầu phải đợi 900 giây (15 phút) trước khi thực hiện yêu cầu mới.\nĐể kiểm tra quy tắc của bạn, hãy chuyển đến tab Stack Outputs trong trang CloudFormation và sử dụng liên kết có tên là Trigger Rate Limiting. Điều đó sẽ tạo ra các yêu cầu quá mức đối với trang web của bạn, mô phỏng lưu lượng truy cập tự động. Sau khi quy tắc giới hạn tỷ lệ được kích hoạt, các phản hồi phải bao gồm mã trạng thái phản hồi HTTP chính xác và tiêu đề chính xác.\nHướng dẫn Tạo quy tắc giới hạn tỷ lệ cho phép tối đa 100 yêu cầu trong 5 phút, khớp với nhãn awswaf:managed:aws:bot-control:bot:name:phpcrawl. Quy tắc này sẽ chặn bằng phản hồi tùy chỉnh, mã phản hồi 429. Chèn khóa tiêu đề tùy chỉnh Retry-After và giá trị 900. Tạo nội dung phản hồi tùy chỉnh có chứa thông báo giải thích lý do chặn: \u0026ldquo;Chỉ cho phép 100 yêu cầu trong khoảng thời gian 5 phút\u0026rdquo;.\nQuy trình Các bước xác minh cho giới hạn tỷ lệ này khác với các tác vụ trước đó. Vui lòng xem xét kỹ các bước xác minh.\nThêm quy tắc tùy chỉnh vào Web ACL: Điều hướng đến tab Quy tắc của Web ACL\nNhấp vào Thêm quy tắc và chọn Thêm quy tắc và nhóm quy tắc của riêng tôi\nChi tiết quy tắc Loại quy tắc: Trình tạo quy tắc Tên: phpcrawl-rate-limiter Loại: Quy tắc dựa trên tỷ lệ Chi tiết tỷ lệ yêu cầu Giới hạn tỷ lệ: 100 trong cửa sổ Đánh giá 5 phút Tổng hợp yêu cầu: Địa chỉ IP nguồn Phạm vi kiểm tra và giới hạn tỷ lệ: Chỉ xem xét các yêu cầu khớp với tiêu chí trong câu lệnh quy tắc Chỉ đếm các yêu cầu khớp với các yêu cầu sau statement Nếu yêu cầu: khớp với statement Inspect: Có nhãn Match Key: awswaf:managed:aws:bot-control:bot:name:phpcrawl Sau đó Action: Block\nCustom response: Enable (đã chọn)\nResponse Code: 429\nClick vào Add new custom header\nResponse Headers:\nKey: Retry-After Value: 900 Click vào \u0026ldquo;Add rule\u0026rdquo; Rule priority Trên trang Set rule priority, hãy đảm bảo rằng quy tắc phpcrawl-rate-limiter mới xuất hiện theo thứ tự DƯỚI quy tắc được quản lý AWS WAF Bot Control (AWS-AWSManagedRulesBotControlRuleSet)\nClick vào Save\nTrên tab Quy tắc, hãy xác minh rằng quy tắc tùy chỉnh mới hiện đã được liệt kê\nBạn đã hoàn tất việc tạo quy tắc tùy chỉnh để giới hạn tốc độ yêu cầu của trình thu thập dữ liệu PHP. Vui lòng lưu ý các bước duy nhất bên dưới để xác thực quy tắc này.\nĐánh giá hiệu quả bảo vệ Sử dụng phương pháp thủ công sau để xác thực quy tắc giới hạn tốc độ:\nĐi tới tab Đầu ra ngăn xếp trong CloudFormation và sử dụng liên kết có tên là Giới hạn tốc độ kích hoạt\nTập lệnh sẽ mô phỏng số lượng yêu cầu quá mức đến trang web thử nghiệm của bạn trong khi mô phỏng bot PHPCrawler\nBan đầu, các yêu cầu sẽ dẫn đến 200 phản hồi OK\nKhi quy tắc giới hạn tốc độ được kích hoạt, các yêu cầu sẽ bị chặn và dẫn đến 429 phản hồi Quá nhiều yêu cầu\nXác nhận rằng tiêu đề Thử lại sau được bao gồm trong các phản hồi\nXin chúc mừng! Bạn đã giới hạn tốc độ thành công cho bot PHPCrawler và ngăn chặn các yêu cầu quá mức tới trang web của bạn.\n"
},
{
	"uri": "//localhost:1313/vi/3-remediate/3.6/",
	"title": "Bảo vệ API bằng Phân tích nội dung yêu cầu",
	"tags": [],
	"description": "",
	"content": "Kịch bản Cửa hàng web đã xây dựng một API để hỗ trợ tích hợp với các đối tác của họ. API này có thể truy xuất danh sách tối đa 100 sản phẩm cùng một lúc. Nhóm phát triển đang làm việc để thêm các lớp bảo mật vào mã API. Nhiệm vụ của bạn là thêm bảo vệ WAF chỉ cho phép các yêu cầu JSON hợp lệ và giới hạn số lượng sản phẩm được liệt kê ở mức từ 1 đến 100.\nSau đây là một ví dụ về JSON hợp lệ được sử dụng để gọi API này:\n{ \u0026#34;numrecords\u0026#34;:\u0026#34;25\u0026#34; } Chỉ các yêu cầu có định dạng JSON hợp lệ và giá trị hợp lệ cho numrecords (bao gồm 1-100) mới được phép. API có sẵn tại đường dẫn /api/listproducts.php. Đối với các yêu cầu API không vượt qua tất cả các bước xác thực, quy tắc WAF sẽ trả về mã phản hồi 400 http. Theo RFC 2616, mã phản hồi 400 http cho biết rằng không thể hiểu được yêu cầu và máy khách không nên lặp lại yêu cầu mà không có sửa đổi.\nHướng dẫn Đầu tiên, hãy tạo một tập hợp mẫu regex khớp với giá trị hợp lệ (1-100) cho numrecords. Sau đây là một biểu thức chính quy mà bạn có thể sử dụng:\n^0*(?:[1-9][0-9]?|100)$ Sau đó, hãy tạo một quy tắc WAF với hai câu lệnh. Một câu lệnh phải khớp với đường dẫn URI của API (/api/listproducts.php). Một câu lệnh khác cần kiểm tra phần thân JSON của các yêu cầu API đến và xác thực rằng cú pháp JSON là hợp lệ. Nó cũng phải xác thực giá trị của \u0026ldquo;numrecords\u0026rdquo; bằng cách sử dụng tập hợp mẫu regex. Nếu đường dẫn URI khớp, nhưng cú pháp không đúng, thì quy tắc WAF sẽ trả về phản hồi tùy chỉnh bằng mã phản hồi http 400.\nSau khi triển khai quy tắc WAF mới để bảo vệ chống lại việc lạm dụng API, hãy kiểm tra khả năng bảo vệ của bạn bằng cả quét thủ công và tự động. Đối với quét thủ công, hãy nhấp vào liên kết trong đầu ra sự kiện. Đối với quét tự động, hãy kiểm tra Bảng điều khiển tiến trình trong Đầu ra sự kiện.\nQuy trình Quy trình bên dưới dài hơn và phức tạp hơn so với các tác vụ trước. Vui lòng đặc biệt chú ý đến các bước được liệt kê bên dưới.\nBộ mẫu biểu thức chính quy Tạo một bộ mẫu biểu thức chính quy khớp với các số từ 1-100:\nĐiều hướng đến Bộ mẫu biểu thức chính quy và xác minh lựa chọn vùng bảng điều khiển WAF là chính xác\nNhấp vào Tạo bộ mẫu biểu thức chính quy\nTên bộ mẫu biểu thức chính quy: số-1-đến-100\nBiểu thức chính quy: ^0(?:[1-9][0-9]?|100)$*\nNhấp vào Tạo mẫu biểu thức chính quy\nQuy tắc WAF Tạo một quy tắc WAF thông thường khớp với tất cả các câu lệnh:\nĐiều hướng đến tab Quy tắc của Web ACL\nNhấp vào Thêm quy tắc và chọn Thêm quy tắc và nhóm quy tắc của riêng tôi\nChi tiết quy tắc Tên quy tắc: api-protection Type: Quy tắc thông thường Nếu yêu cầu: Phù hợp với tất cả các câu lệnh (AND) Câu lệnh #1 Inspect: Đường dẫn URI Kiểu khớp: Khớp chính xác với chuỗi Chuỗi cần khớp: /api/listproducts.php Chuyển đổi văn bản: không có Câu lệnh #2 Phủ định kết quả câu lệnh (đã chọn) Inspect: Nội dung Kiểu nội dung: JSON Phạm vi khớp JSON: Giá trị AWS WAF nên xử lý yêu cầu như thế nào nếu JSON trong nội dung yêu cầu không hợp lệ: Không khớp So khớp phần tử JSON cụ thể với câu lệnh regex:\nNội dung cần kiểm tra: Chỉ các phần tử được bao gồm Được bao gồm elements: /numrecords Match type: Matches pattern from regex pattern set Regex pattern set: (đã tạo trước đó pattern set khớp với các số từ 1-100) Text transformation: None Oversize handling: Continue Then Action: Block Custom response: Enable (checked) Response Code: 400 Click vào Add rule Rule priority Trên trang Set rule priority, click vào Save 2. Trên tab Rules, hãy xác minh rằng quy tắc tùy chỉnh mới hiện đã được liệt kê\nBạn đã hoàn tất việc thêm quy tắc tùy chỉnh kiểm tra các giá trị JSON trong nội dung yêu cầu và bảo vệ API của bạn khỏi việc sử dụng không đúng cách. Bây giờ bạn đã sẵn sàng để kiểm tra khả năng bảo vệ. Đánh giá hiệu quả bảo vệ Sử dụng cả phương pháp kiểm tra thủ công và tự động để đánh giá hiệu quả của quy tắc mới trong ACL của bạn:\nSử dụng chức năng quét thủ công từ phần Đánh giá. Xác thực rằng bài kiểm tra Sử dụng sai API đang vượt qua. 2. Xem lại bảng điều khiển hội thảo và xác minh rằng quét tự động Sử dụng sai API đang vượt qua (bài kiểm tra phải được mã hóa màu xanh lá cây). Tham khảo phần Đánh giá để biết hướng dẫn.\n"
},
{
	"uri": "//localhost:1313/vi/6-clean-up/",
	"title": "Clean Up",
	"tags": [],
	"description": "",
	"content": " Làm trống tất cả các thùng S3 liên quan đến hội thảo.\nĐi đến Trang CloudFormation Stack.\nXóa Stack đã triển khai trong phần chuẩn bị. "
},
{
	"uri": "//localhost:1313/vi/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "//localhost:1313/vi/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]