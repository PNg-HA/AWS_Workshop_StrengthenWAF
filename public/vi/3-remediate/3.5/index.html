<!DOCTYPE html>
<html lang="vi" class="js csstransforms3d">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.128.2">
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="//localhost:1313/images/favicon.png" type="image/png">

    <title>Tỷ lệ giới hạn lưu lượng truy cập của bot và gửi phản hồi tùy chỉnh :: AWS WAF</title>

    
    <link href="//localhost:1313/css/nucleus.css?1729628240" rel="stylesheet">
    <link href="//localhost:1313/css/fontawesome-all.min.css?1729628240" rel="stylesheet">
    <link href="//localhost:1313/css/hybrid.css?1729628240" rel="stylesheet">
    <link href="//localhost:1313/css/featherlight.min.css?1729628240" rel="stylesheet">
    <link href="//localhost:1313/css/perfect-scrollbar.min.css?1729628240" rel="stylesheet">
    <link href="//localhost:1313/css/auto-complete.css?1729628240" rel="stylesheet">
    <link href="//localhost:1313/css/atom-one-dark-reasonable.css?1729628240" rel="stylesheet">
    <link href="//localhost:1313/css/theme.css?1729628240" rel="stylesheet">
    <link href="//localhost:1313/css/hugo-theme.css?1729628240" rel="stylesheet">
    
    <link href="//localhost:1313/css/theme-workshop.css?1729628240" rel="stylesheet">
    
    

    <script src="//localhost:1313/js/jquery-3.3.1.min.js?1729628240"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="//localhost:1313/vi/3-remediate/3.5/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="//localhost:1313/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="//localhost:1313/js/lunr.min.js?1729628240"></script>
<script type="text/javascript" src="//localhost:1313/js/auto-complete.js?1729628240"></script>
<script type="text/javascript">
    
        var baseurl = "\/\/localhost:1313\/\/vi";
    
</script>
<script type="text/javascript" src="//localhost:1313/js/search.js?1729628240"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/vi/1-introduction/" title="Introduction" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/1-introduction/">
           <b> 1. </b> Introduction
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/2-preparation/" title="Preparation" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-preparation/">
           <b> 2. </b> Preparation
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/3-remediate/" title="Khắc phục" class="dd-item 
        parent
        
        
        ">
      <a href="//localhost:1313/vi/3-remediate/">
           <b> 3. </b> Khắc phục
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/3-remediate/3.1/" title="Áp dụng Bảo vệ Nền tảng với AWS Managed Rule" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/3-remediate/3.1/">
           <b> 3.1 </b> Áp dụng Bảo vệ Nền tảng với AWS Managed Rule
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-remediate/3.2/" title="Đưa ABAC vào hoạt động" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/3-remediate/3.2/">
           <b> Nhiệm vụ-1.2: </b> Đưa ABAC vào hoạt động
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-remediate/3.3/" title="Tăng khả năng hiển thị lưu lượng truy cập của Bot" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/3-remediate/3.3/">
           <b> 3.3 </b> Tăng khả năng hiển thị lưu lượng truy cập của Bot
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-remediate/3.4/" title="Chặn Bot xấu bằng AWS Rule tùy chỉnh" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/3-remediate/3.4/">
           <b> 3.4 </b> Chặn Bot xấu bằng AWS Rule tùy chỉnh
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-remediate/3.5/" title="Tỷ lệ giới hạn lưu lượng truy cập của bot và gửi phản hồi tùy chỉnh" class="dd-item 
        
        active
        
        ">
      <a href="//localhost:1313/vi/3-remediate/3.5/">
           <b> 3.5 </b> Tỷ lệ giới hạn lưu lượng truy cập của bot và gửi phản hồi tùy chỉnh
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-remediate/3.6/" title="Bảo vệ API bằng Phân tích nội dung yêu cầu" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/3-remediate/3.6/">
           <b> 3.6 </b> Bảo vệ API bằng Phân tích nội dung yêu cầu
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/4-monitor/" title="Monitor" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/4-monitor/">
           <b> 4. </b> Monitor
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/4-monitor/4.1/" title="Điều tra Nhật ký AWS WAF" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/4-monitor/4.1/">
           <b> 4.1. </b> Điều tra Nhật ký AWS WAF
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/4-monitor/4.2/" title="Block Mystery Test" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/4-monitor/4.2/">
           <b> 4.2. </b> Block Mystery Test
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/4-monitor/4.3/" title="Insert Custom HTTP Request Header" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/4-monitor/4.3/">
           <b> 4.3. </b> Insert Custom HTTP Request Header
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/5-optional/" title="Tùy chọn" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/5-optional/">
           <b> 5. </b> Tùy chọn
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/5-optional/5.1/" title="Tạo báo động CloudWatch cho số liệu AWS WAF" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/5-optional/5.1/">
           <b> 5.1. </b> Tạo báo động CloudWatch cho số liệu AWS WAF
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/5-optional/5.2/" title="Review the WAF Bot Dashboard" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/5-optional/5.2/">
           <b> 5.2. </b> Review the WAF Bot Dashboard
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/5-optional/5.3/" title="Bảo vệ biểu mẫu web bằng CAPTCHA" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/5-optional/5.3/">
           <b> 5.3. </b> Bảo vệ biểu mẫu web bằng CAPTCHA
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/6-clean-up/" title="Clean Up" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/6-clean-up/">
           <b> 6. </b> Clean Up
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj/"><i class='fab fa-facebook'></i> AWS Study Group</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="//localhost:1313/3-remediate/3.5/">English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="//localhost:1313/vi/3-remediate/3.5/" selected>Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
     <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title="Migrate" Alt="web counter"   border="0" /></a>  <br>
     <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" Alt="web counter"   border="0"   />
     
</left>
<left>
    <br>
    <br>
        <b> Last Updated </b> <br>
        <i><font color=orange>23-10-2024</font></i>
    </left>
    <left>
        <br>
        <br>
            <b> Team </b> <br>
           
            <i>                 <a href="https://www.linkedin.com/in/anhpnh"  style="color:orange"> Hải Anh </a>
               
        </i>
        </left>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='//localhost:1313/vi/'>Tăng cường khả năng phòng thủ cho ứng dụng web của bạn bằng AWS WAF</a> > <a href='//localhost:1313/vi/3-remediate/'>Khắc phục</a> > Tỷ lệ giới hạn lưu lượng truy cập của bot và gửi phản hồi tùy chỉnh
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#kịch-bản">Kịch bản</a></li>
        <li><a href="#hướng-dẫn">Hướng dẫn</a></li>
        <li><a href="#quy-trình">Quy trình</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Tỷ lệ giới hạn lưu lượng truy cập của bot và gửi phản hồi tùy chỉnh
            </h1>
          

        



	<h3 id="kịch-bản">Kịch bản</h3>
<p>Sau khi phân tích sâu hơn, nhóm quản lý trang web đã xác định một trong những đối tác của bạn sử dụng bot thu thập thông tin PHP và đôi khi tạo ra các đợt tăng đột biến lưu lượng truy cập, làm chậm trang web đối với những người dùng khác. Đối tác đã được thông báo để làm việc để giảm các đợt tăng đột biến đó. Trong khi bạn chờ họ khắc phục, bạn cần giới hạn tỷ lệ lưu lượng truy cập tự động của họ để tránh bất kỳ tác động nào nữa đến hiệu suất của trang web. Giới hạn tỷ lệ phải là 100 yêu cầu trong 5 phút. Sau khi đạt đến giới hạn, phản hồi phải tuân theo RFC 6585 bằng cách trả về mã lỗi http 429 (quá nhiều yêu cầu) với tiêu đề <strong>Thử lại sau</strong> cho biết người yêu cầu phải đợi 900 giây (15 phút) trước khi thực hiện yêu cầu mới.</p>
<p>Để kiểm tra quy tắc của bạn, hãy chuyển đến tab Stack Outputs trong trang CloudFormation và sử dụng liên kết có tên là Trigger Rate Limiting. Điều đó sẽ tạo ra các yêu cầu quá mức đối với trang web của bạn, mô phỏng lưu lượng truy cập tự động. Sau khi quy tắc giới hạn tỷ lệ được kích hoạt, các phản hồi phải bao gồm mã trạng thái phản hồi HTTP chính xác và tiêu đề chính xác.</p>
<h3 id="hướng-dẫn">Hướng dẫn</h3>
<p>Tạo quy tắc giới hạn tỷ lệ cho phép tối đa 100 yêu cầu trong 5 phút, khớp với nhãn awswaf:managed:aws:bot-control:bot:name:phpcrawl. Quy tắc này sẽ chặn bằng phản hồi tùy chỉnh, mã phản hồi <strong>429</strong>. Chèn khóa tiêu đề tùy chỉnh <strong>Retry-After</strong> và giá trị <strong>900</strong>. Tạo nội dung phản hồi tùy chỉnh có chứa thông báo giải thích lý do chặn: &ldquo;Chỉ cho phép 100 yêu cầu trong khoảng thời gian 5 phút&rdquo;.</p>
<h3 id="quy-trình">Quy trình</h3>

<div class="notices info" ><p>Các bước xác minh cho giới hạn tỷ lệ này khác với các tác vụ trước đó. Vui lòng xem xét kỹ các bước xác minh.</p>
</div>

<h4 id="thêm-quy-tắc-tùy-chỉnh-vào-web-acl">Thêm quy tắc tùy chỉnh vào Web ACL:</h4>
<ol>
<li>
<p>Điều hướng đến tab Quy tắc của Web ACL</p>
</li>
<li>
<p>Nhấp vào Thêm quy tắc và chọn Thêm quy tắc và nhóm quy tắc của riêng tôi</p>
</li>
</ol>
<p><img alt="1.1" src="//localhost:1313/images/3/5/add_rule.png"></p>
<h4 id="chi-tiết-quy-tắc">Chi tiết quy tắc</h4>
<ol>
<li>Loại quy tắc: Trình tạo quy tắc</li>
<li>Tên: phpcrawl-rate-limiter</li>
<li>Loại: Quy tắc dựa trên tỷ lệ</li>
</ol>
<p><img alt="1.1" src="//localhost:1313/images/3/5/rule_detail.png"></p>
<h4 id="chi-tiết-tỷ-lệ-yêu-cầu">Chi tiết tỷ lệ yêu cầu</h4>
<ol>
<li>Giới hạn tỷ lệ: 100 trong cửa sổ Đánh giá 5 phút</li>
<li>Tổng hợp yêu cầu: Địa chỉ IP nguồn</li>
<li>Phạm vi kiểm tra và giới hạn tỷ lệ: Chỉ xem xét các yêu cầu khớp với tiêu chí trong câu lệnh quy tắc</li>
</ol>
<p><img alt="1.1" src="//localhost:1313/images/3/5/request.png"></p>
<h4 id="chỉ-đếm-các-yêu-cầu-khớp-với-các-yêu-cầu-sau-statement">Chỉ đếm các yêu cầu khớp với các yêu cầu sau statement</h4>
<ol>
<li>Nếu yêu cầu: khớp với statement</li>
<li>Inspect: Có nhãn</li>
<li>Match Key: awswaf:managed:aws:bot-control:bot:name:phpcrawl</li>
</ol>
<p><img alt="1.1" src="//localhost:1313/images/3/5/count.png"></p>
<h4 id="sau-đó">Sau đó</h4>
<ol>
<li>
<p>Action: Block</p>
</li>
<li>
<p>Custom response: Enable (đã chọn)</p>
</li>
<li>
<p>Response Code: 429</p>
</li>
<li>
<p>Click vào Add new custom header</p>
</li>
<li>
<p>Response Headers:</p>
</li>
</ol>
<ul>
<li>Key: Retry-After</li>
<li>Value: 900</li>
</ul>
<ol start="6">
<li>Click vào &ldquo;Add rule&rdquo;</li>
</ol>
<p><img alt="1.1" src="//localhost:1313/images/3/5/then.png"></p>
<h4 id="rule-priority">Rule priority</h4>
<ol>
<li>
<p>Trên trang Set rule priority, hãy đảm bảo rằng quy tắc phpcrawl-rate-limiter mới xuất hiện theo thứ tự DƯỚI quy tắc được quản lý AWS WAF Bot Control (AWS-AWSManagedRulesBotControlRuleSet)</p>
</li>
<li>
<p>Click vào Save</p>
</li>
<li>
<p>Trên tab Quy tắc, hãy xác minh rằng quy tắc tùy chỉnh mới hiện đã được liệt kê</p>
</li>
<li>
<p>Bạn đã hoàn tất việc tạo quy tắc tùy chỉnh để giới hạn tốc độ yêu cầu của trình thu thập dữ liệu PHP. Vui lòng lưu ý các bước duy nhất bên dưới để xác thực quy tắc này.</p>
</li>
</ol>
<h4 id="đánh-giá-hiệu-quả-bảo-vệ">Đánh giá hiệu quả bảo vệ</h4>
<p>Sử dụng phương pháp thủ công sau để xác thực quy tắc giới hạn tốc độ:</p>
<ol>
<li>
<p>Đi tới tab Đầu ra ngăn xếp trong CloudFormation và sử dụng liên kết có tên là Giới hạn tốc độ kích hoạt</p>
</li>
<li>
<p>Tập lệnh sẽ mô phỏng số lượng yêu cầu quá mức đến trang web thử nghiệm của bạn trong khi mô phỏng bot PHPCrawler</p>
</li>
<li>
<p>Ban đầu, các yêu cầu sẽ dẫn đến 200 phản hồi OK</p>
</li>
</ol>
<p><img alt="1.1" src="//localhost:1313/images/3/5/e_s3.png"></p>
<ol start="4">
<li>
<p>Khi quy tắc giới hạn tốc độ được kích hoạt, các yêu cầu sẽ bị chặn và dẫn đến 429 phản hồi Quá nhiều yêu cầu</p>
</li>
<li>
<p>Xác nhận rằng tiêu đề Thử lại sau được bao gồm trong các phản hồi</p>
</li>
</ol>
<p><img alt="1.1" src="//localhost:1313/images/3/5/e_s5.png">
Xin chúc mừng! Bạn đã giới hạn tốc độ thành công cho bot PHPCrawler và ngăn chặn các yêu cầu quá mức tới trang web của bạn.</p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="//localhost:1313/vi/3-remediate/3.4/" title="Chặn Bot xấu bằng AWS Rule tùy chỉnh"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="//localhost:1313/vi/3-remediate/3.6/" title="Bảo vệ API bằng Phân tích nội dung yêu cầu" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="//localhost:1313/js/clipboard.min.js?1729628240"></script>
    <script src="//localhost:1313/js/perfect-scrollbar.min.js?1729628240"></script>
    <script src="//localhost:1313/js/perfect-scrollbar.jquery.min.js?1729628240"></script>
    <script src="//localhost:1313/js/jquery.sticky.js?1729628240"></script>
    <script src="//localhost:1313/js/featherlight.min.js?1729628240"></script>
    <script src="//localhost:1313/js/highlight.pack.js?1729628240"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="//localhost:1313/js/modernizr.custom-3.6.0.js?1729628240"></script>
    <script src="//localhost:1313/js/learn.js?1729628240"></script>
    <script src="//localhost:1313/js/hugo-learn.js?1729628240"></script>

    <link href="//localhost:1313/mermaid/mermaid.css?1729628240" rel="stylesheet" />
    <script src="//localhost:1313/mermaid/mermaid.js?1729628240"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
