<!DOCTYPE html>
<html lang="vi" class="js csstransforms3d">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.128.2">
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="//localhost:1313/images/favicon.png" type="image/png">

    <title>Bảo vệ API bằng Phân tích nội dung yêu cầu :: AWS WAF</title>

    
    <link href="//localhost:1313/css/nucleus.css?1729628240" rel="stylesheet">
    <link href="//localhost:1313/css/fontawesome-all.min.css?1729628240" rel="stylesheet">
    <link href="//localhost:1313/css/hybrid.css?1729628240" rel="stylesheet">
    <link href="//localhost:1313/css/featherlight.min.css?1729628240" rel="stylesheet">
    <link href="//localhost:1313/css/perfect-scrollbar.min.css?1729628240" rel="stylesheet">
    <link href="//localhost:1313/css/auto-complete.css?1729628240" rel="stylesheet">
    <link href="//localhost:1313/css/atom-one-dark-reasonable.css?1729628240" rel="stylesheet">
    <link href="//localhost:1313/css/theme.css?1729628240" rel="stylesheet">
    <link href="//localhost:1313/css/hugo-theme.css?1729628240" rel="stylesheet">
    
    <link href="//localhost:1313/css/theme-workshop.css?1729628240" rel="stylesheet">
    
    

    <script src="//localhost:1313/js/jquery-3.3.1.min.js?1729628240"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="//localhost:1313/vi/3-remediate/3.6/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="//localhost:1313/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="//localhost:1313/js/lunr.min.js?1729628240"></script>
<script type="text/javascript" src="//localhost:1313/js/auto-complete.js?1729628240"></script>
<script type="text/javascript">
    
        var baseurl = "\/\/localhost:1313\/\/vi";
    
</script>
<script type="text/javascript" src="//localhost:1313/js/search.js?1729628240"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/vi/1-introduction/" title="Introduction" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/1-introduction/">
           <b> 1. </b> Introduction
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/2-preparation/" title="Preparation" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-preparation/">
           <b> 2. </b> Preparation
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/3-remediate/" title="Khắc phục" class="dd-item 
        parent
        
        
        ">
      <a href="//localhost:1313/vi/3-remediate/">
           <b> 3. </b> Khắc phục
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/3-remediate/3.1/" title="Áp dụng Bảo vệ Nền tảng với AWS Managed Rule" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/3-remediate/3.1/">
           <b> 3.1 </b> Áp dụng Bảo vệ Nền tảng với AWS Managed Rule
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-remediate/3.2/" title="Đưa ABAC vào hoạt động" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/3-remediate/3.2/">
           <b> Nhiệm vụ-1.2: </b> Đưa ABAC vào hoạt động
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-remediate/3.3/" title="Tăng khả năng hiển thị lưu lượng truy cập của Bot" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/3-remediate/3.3/">
           <b> 3.3 </b> Tăng khả năng hiển thị lưu lượng truy cập của Bot
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-remediate/3.4/" title="Chặn Bot xấu bằng AWS Rule tùy chỉnh" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/3-remediate/3.4/">
           <b> 3.4 </b> Chặn Bot xấu bằng AWS Rule tùy chỉnh
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-remediate/3.5/" title="Tỷ lệ giới hạn lưu lượng truy cập của bot và gửi phản hồi tùy chỉnh" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/3-remediate/3.5/">
           <b> 3.5 </b> Tỷ lệ giới hạn lưu lượng truy cập của bot và gửi phản hồi tùy chỉnh
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-remediate/3.6/" title="Bảo vệ API bằng Phân tích nội dung yêu cầu" class="dd-item 
        
        active
        
        ">
      <a href="//localhost:1313/vi/3-remediate/3.6/">
           <b> 3.6 </b> Bảo vệ API bằng Phân tích nội dung yêu cầu
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/4-monitor/" title="Monitor" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/4-monitor/">
           <b> 4. </b> Monitor
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/4-monitor/4.1/" title="Điều tra Nhật ký AWS WAF" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/4-monitor/4.1/">
           <b> 4.1. </b> Điều tra Nhật ký AWS WAF
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/4-monitor/4.2/" title="Block Mystery Test" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/4-monitor/4.2/">
           <b> 4.2. </b> Block Mystery Test
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/4-monitor/4.3/" title="Insert Custom HTTP Request Header" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/4-monitor/4.3/">
           <b> 4.3. </b> Insert Custom HTTP Request Header
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/5-optional/" title="Tùy chọn" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/5-optional/">
           <b> 5. </b> Tùy chọn
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/5-optional/5.1/" title="Tạo báo động CloudWatch cho số liệu AWS WAF" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/5-optional/5.1/">
           <b> 5.1. </b> Tạo báo động CloudWatch cho số liệu AWS WAF
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/5-optional/5.2/" title="Review the WAF Bot Dashboard" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/5-optional/5.2/">
           <b> 5.2. </b> Review the WAF Bot Dashboard
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/5-optional/5.3/" title="Bảo vệ biểu mẫu web bằng CAPTCHA" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/5-optional/5.3/">
           <b> 5.3. </b> Bảo vệ biểu mẫu web bằng CAPTCHA
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/6-clean-up/" title="Clean Up" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/6-clean-up/">
           <b> 6. </b> Clean Up
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj/"><i class='fab fa-facebook'></i> AWS Study Group</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="//localhost:1313/3-remediate/3.6/">English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="//localhost:1313/vi/3-remediate/3.6/" selected>Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
     <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title="Migrate" Alt="web counter"   border="0" /></a>  <br>
     <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" Alt="web counter"   border="0"   />
     
</left>
<left>
    <br>
    <br>
        <b> Last Updated </b> <br>
        <i><font color=orange>23-10-2024</font></i>
    </left>
    <left>
        <br>
        <br>
            <b> Team </b> <br>
           
            <i>                 <a href="https://www.linkedin.com/in/anhpnh"  style="color:orange"> Hải Anh </a>
               
        </i>
        </left>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='//localhost:1313/vi/'>Tăng cường khả năng phòng thủ cho ứng dụng web của bạn bằng AWS WAF</a> > <a href='//localhost:1313/vi/3-remediate/'>Khắc phục</a> > Bảo vệ API bằng Phân tích nội dung yêu cầu
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#kịch-bản">Kịch bản</a></li>
        <li><a href="#hướng-dẫn">Hướng dẫn</a></li>
        <li><a href="#quy-trình">Quy trình</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Bảo vệ API bằng Phân tích nội dung yêu cầu
            </h1>
          

        



	<h3 id="kịch-bản">Kịch bản</h3>
<p>Cửa hàng web đã xây dựng một API để hỗ trợ tích hợp với các đối tác của họ. API này có thể truy xuất danh sách tối đa 100 sản phẩm cùng một lúc. Nhóm phát triển đang làm việc để thêm các lớp bảo mật vào mã API. Nhiệm vụ của bạn là thêm bảo vệ WAF chỉ cho phép các yêu cầu JSON hợp lệ và giới hạn số lượng sản phẩm được liệt kê ở mức từ 1 đến 100.</p>
<p>Sau đây là một ví dụ về JSON hợp lệ được sử dụng để gọi API này:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">{</span> <span style="color:#e6db74">&#34;numrecords&#34;</span>:<span style="color:#e6db74">&#34;25&#34;</span> <span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Chỉ các yêu cầu có định dạng JSON hợp lệ và giá trị hợp lệ cho numrecords (bao gồm 1-100) mới được phép. API có sẵn tại đường dẫn <strong>/api/listproducts.php</strong>. Đối với các yêu cầu API không vượt qua tất cả các bước xác thực, quy tắc WAF sẽ trả về mã phản hồi 400 http. Theo RFC 2616, mã phản hồi 400 http cho biết rằng không thể hiểu được yêu cầu và máy khách không nên lặp lại yêu cầu mà không có sửa đổi.</p>
<h3 id="hướng-dẫn">Hướng dẫn</h3>
<p>Đầu tiên, hãy tạo một tập hợp mẫu regex khớp với giá trị hợp lệ (1-100) cho numrecords. Sau đây là một biểu thức chính quy mà bạn có thể sử dụng:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>^0*<span style="color:#f92672">(</span>?:<span style="color:#f92672">[</span>1-9<span style="color:#f92672">][</span>0-9<span style="color:#f92672">]</span>?|100<span style="color:#f92672">)</span>$
</span></span></code></pre></div><p>Sau đó, hãy tạo một quy tắc WAF với hai câu lệnh. Một câu lệnh phải khớp với đường dẫn URI của API (/api/listproducts.php). Một câu lệnh khác cần kiểm tra phần thân JSON của các yêu cầu API đến và xác thực rằng cú pháp JSON là hợp lệ. Nó cũng phải xác thực giá trị của &ldquo;numrecords&rdquo; bằng cách sử dụng tập hợp mẫu regex. Nếu đường dẫn URI khớp, nhưng cú pháp không đúng, thì quy tắc WAF sẽ trả về phản hồi tùy chỉnh bằng mã phản hồi http 400.</p>
<p>Sau khi triển khai quy tắc WAF mới để bảo vệ chống lại việc lạm dụng API, hãy kiểm tra khả năng bảo vệ của bạn bằng cả quét thủ công và tự động. Đối với quét thủ công, hãy nhấp vào liên kết trong đầu ra sự kiện. Đối với quét tự động, hãy kiểm tra Bảng điều khiển tiến trình trong Đầu ra sự kiện.</p>
<h3 id="quy-trình">Quy trình</h3>
<p>Quy trình bên dưới dài hơn và phức tạp hơn so với các tác vụ trước. Vui lòng đặc biệt chú ý đến các bước được liệt kê bên dưới.</p>
<h4 id="bộ-mẫu-biểu-thức-chính-quy">Bộ mẫu biểu thức chính quy</h4>
<p>Tạo một bộ mẫu biểu thức chính quy khớp với các số từ 1-100:</p>
<ol>
<li>
<p>Điều hướng đến Bộ mẫu biểu thức chính quy và xác minh lựa chọn vùng bảng điều khiển WAF là chính xác</p>
</li>
<li>
<p>Nhấp vào Tạo bộ mẫu biểu thức chính quy</p>
</li>
<li>
<p>Tên bộ mẫu biểu thức chính quy: số-1-đến-100</p>
</li>
<li>
<p>Biểu thức chính quy: <em><em>^0</em>(?:[1-9][0-9]?|100)$</em>*</p>
</li>
<li>
<p>Nhấp vào <strong>Tạo mẫu biểu thức chính quy</strong></p>
</li>
</ol>
<p><img alt="1.1" src="//localhost:1313/images/3/6/regrex.png"></p>
<h4 id="quy-tắc-waf">Quy tắc WAF</h4>
<ol>
<li>
<p>Tạo một quy tắc WAF thông thường khớp với tất cả các câu lệnh:</p>
</li>
<li>
<p>Điều hướng đến tab Quy tắc của Web ACL</p>
</li>
<li>
<p>Nhấp vào Thêm quy tắc và chọn Thêm quy tắc và nhóm quy tắc của riêng tôi</p>
</li>
</ol>
<p><img alt="1.1" src="//localhost:1313/images/3/6/add_rule.png"></p>
<h4 id="chi-tiết-quy-tắc">Chi tiết quy tắc</h4>
<ol>
<li>Tên quy tắc: api-protection</li>
<li>Type: Quy tắc thông thường</li>
<li>Nếu yêu cầu: Phù hợp với tất cả các câu lệnh (AND)</li>
</ol>
<p><img alt="1.1" src="//localhost:1313/images/3/6/rule_details.png"></p>
<h4 id="câu-lệnh-1">Câu lệnh #1</h4>
<ol>
<li>Inspect: Đường dẫn URI</li>
<li>Kiểu khớp: Khớp chính xác với chuỗi</li>
<li>Chuỗi cần khớp: /api/listproducts.php</li>
<li>Chuyển đổi văn bản: không có</li>
</ol>
<p><img alt="1.1" src="//localhost:1313/images/3/6/s1.png"></p>
<h4 id="câu-lệnh-2">Câu lệnh #2</h4>
<ol>
<li>Phủ định kết quả câu lệnh (đã chọn)</li>
<li>Inspect: Nội dung</li>
<li>Kiểu nội dung: JSON</li>
<li>Phạm vi khớp JSON: Giá trị</li>
<li>AWS WAF nên xử lý yêu cầu như thế nào nếu JSON trong nội dung yêu cầu không hợp lệ: <strong>Không khớp</strong></li>
</ol>
<p><img alt="1.1" src="//localhost:1313/images/3/6/s2.png"></p>
<p>So khớp phần tử JSON cụ thể với câu lệnh regex:</p>
<ol>
<li>Nội dung cần kiểm tra: Chỉ các phần tử được bao gồm</li>
<li>Được bao gồm elements: /numrecords</li>
<li>Match type: Matches pattern from regex pattern set</li>
<li>Regex pattern set: (đã tạo trước đó pattern set khớp với các số từ 1-100)</li>
<li>Text transformation: None</li>
<li>Oversize handling: Continue
<img alt="1.1" src="//localhost:1313/images/3/6/s2b.png"></li>
</ol>
<h4 id="then">Then</h4>
<ol>
<li>Action: Block</li>
<li>Custom response: Enable (checked)</li>
<li>Response Code: 400</li>
<li>Click vào Add rule</li>
</ol>
<p><img alt="1.1" src="//localhost:1313/images/3/6/then.png"></p>
<h4 id="rule-priority">Rule priority</h4>
<ol>
<li>Trên trang Set rule priority, click vào Save</li>
</ol>
<p><img alt="1.1" src="//localhost:1313/images/3/6/prio_s1.png">
2. Trên tab Rules, hãy xác minh rằng quy tắc tùy chỉnh mới hiện đã được liệt kê</p>
<ol start="3">
<li>Bạn đã hoàn tất việc thêm quy tắc tùy chỉnh kiểm tra các giá trị JSON trong nội dung yêu cầu và bảo vệ API của bạn khỏi việc sử dụng không đúng cách. Bây giờ bạn đã sẵn sàng để kiểm tra khả năng bảo vệ.</li>
</ol>
<h4 id="đánh-giá-hiệu-quả-bảo-vệ">Đánh giá hiệu quả bảo vệ</h4>
<p>Sử dụng cả phương pháp kiểm tra thủ công và tự động để đánh giá hiệu quả của quy tắc mới trong ACL của bạn:</p>
<ol>
<li>Sử dụng chức năng quét thủ công từ phần Đánh giá. Xác thực rằng bài kiểm tra Sử dụng sai API đang vượt qua.</li>
</ol>
<p><img alt="1.1" src="//localhost:1313/images/3/6/e_s1.png">
2. Xem lại bảng điều khiển hội thảo và xác minh rằng quét tự động Sử dụng sai API đang vượt qua (bài kiểm tra phải được mã hóa màu xanh lá cây). Tham khảo phần Đánh giá để biết hướng dẫn.</p>
<p><img alt="1.1" src="//localhost:1313/images/3/6/e_s2.png"></p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="//localhost:1313/vi/3-remediate/3.5/" title="Tỷ lệ giới hạn lưu lượng truy cập của bot và gửi phản hồi tùy chỉnh"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="//localhost:1313/vi/4-monitor/" title="Monitor" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="//localhost:1313/js/clipboard.min.js?1729628240"></script>
    <script src="//localhost:1313/js/perfect-scrollbar.min.js?1729628240"></script>
    <script src="//localhost:1313/js/perfect-scrollbar.jquery.min.js?1729628240"></script>
    <script src="//localhost:1313/js/jquery.sticky.js?1729628240"></script>
    <script src="//localhost:1313/js/featherlight.min.js?1729628240"></script>
    <script src="//localhost:1313/js/highlight.pack.js?1729628240"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="//localhost:1313/js/modernizr.custom-3.6.0.js?1729628240"></script>
    <script src="//localhost:1313/js/learn.js?1729628240"></script>
    <script src="//localhost:1313/js/hugo-learn.js?1729628240"></script>

    <link href="//localhost:1313/mermaid/mermaid.css?1729628240" rel="stylesheet" />
    <script src="//localhost:1313/mermaid/mermaid.js?1729628240"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
